<!DOCTYPE html><html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1"><title>IHM 2015</title>
    <style type="text/css">
    body { 
        margin:40px auto;
        max-width:650px;
        line-height:1.6;
        font-size:18px;
        color:#444;
        padding:0 10px
    }
    h1,h2,h3 {
        line-height:1.2
    }
    tr.border_bottom td {
        border-bottom:1pt solid black;
    }
    </style>
    </head>
<body>
<h1>HEIG-VD | IHM 2015</h1>
<div align="right">Andres Perez-Uribe</div>
<div align="right">Jonathan Bischof</div>
<div align="right">Hector Satizabal</div>
<hr>

<h2>Developing a configurable user interface for the Pebble Smartwatch</h2>
<p>
The goal of this project is to develop a custom user interface for the Pebble watch that can be configured by the user. The Smartwatch should be able to show information provided by the Smartphone it is paired with. We will provide you with some services from the Smartphone, and you have to create a user interface showing some of the fields as Pebble screens.
</p>

<h3>Interface Requirements</h3>
<p>
<ul>
    <li>You have to create a Watchapp with 4 configurable screens</li>
    <li>Each Pebble screen can display two items</li>
    <li>You have to create a Pebble menu where the user can configure which information to put in each one of the screens</li>
    <li>You have to program the buttons of the Pebble (up and down) for switching between screens</li>
</ul>
</p>
<p>
Bonus:
<ul>
    <li>You can create different manners to show the information (e.g., text, bar, gauge, compass), similar to the widgets in Qt</li>
</ul>
</p>

<p>
This video shows a device with an interface very similar to the one we ask you to build: <a href="https://www.youtube.com/watch?v=-Pc3o33vElI">https://www.youtube.com/watch?v=-Pc3o33vElI</a>
</p>

<p>
The following sections will give you an introduction to the technology you are going to use during this project, and will describe the setup we propose as starting point of your implementations. 
</p>

<h2>The Pebble Smartwatch</h2>
<p>
The Pebble Smartwatch is a smartwatch developed by Pebble Technology Corporation and released in 2013 that received the majority of its initial funding via the crowdfunding platform Kickstarter. The watch features a black and white low power LCD, a programmable CPU, memory, storage, Bluetooth, a vibrating motor, a magnetometer, an ambient light sensor, and an accelerometer; these extend its use into many roles including interacting with smartphone notifications, activity tracking, gaming, map display, and golf tracking. The Pebble is compatible with Android and iOS devices. When connected to one of these devices via Bluetooth, it will vibrate and display text messages, emails, incoming calls, and notifications from social media accounts when they are received on the paired device. It can also act as a remote control for the phone, or for cameras such as the GoPro. As of February 2014, the Pebble app store had over 1000 applications developed using Pebble's free software development kit (SDK). (From Wikipedia)
</p>

<h3>Pebble Watchapps and Watchfaces</h3>
<p>
The Pebble has custom screens that show some information to the user. They allow the user to interact with the Pebble watch and thus, with the smartphone that paired the smartwatch. Watchapps and Watchfaces can be downloaded from the Pebble store, or implemented using the <a href="https://developer.getpebble.com/tutorials/watchface-tutorial/part1/">SDK</a> provided by Pebble.
</p>
<p>
Both Watchapps and Watchfaces can be developped using the Pebble SDK. The main difference between the two kinds are that watchfaces are selected using the Up and Down buttons and serve as the default display on the watch. This also means that these buttons are not available for custom behavior (Back and Select are also not available to watchfaces). In contrast, watchapps are launched from the Pebble system menu. These have more capabilities such as button clicks and menu elements.
</p>

<p>
These are some examples of Watchapps and Watchfaces:
</p>

<table style="width:100%">
  <tr>
    <td><img src="1397_900.jpg" height="157" width="147"></td>
    <td><img src="Zawpd8f.png" height="188" width="206"></td>
    <td><img src="games-pebble-wired-design.jpg" height="202" width="296"></td> 
  </tr>
  <tr>
    <td align="center">Time and weather</td>
    <td align="center">Sports</td>
    <td align="center">Games</td> 
  </tr>
</table>

<h2>Project Setup</h2>

<h3>The Smartphone App</h3>
<p>
Pebble Watchapps can run both independently, or sharing information with an app running on a paired Smartphone. In the particular case of this project, we provide you with an app called <em>Pebble IHM</em> who runs on the Smartphone and gathers the information that need to be shown in the Pebble screen.
</p>
<p>
<em>Pebble IHM</em> is already installed on the Smartphones we prepared for you. However, you can also clone the base <a href="http://developer.android.com/sdk/index.html">Android studio</a> project from <a href="https://github.com/itzkha/IHM_2015">GitHub</a> by using:
</p>

<p>
<tt>git clone https://github.com/itzkha/IHM_2015.git</tt>
</p>

<p>
This Smartphone app gathers information from its own sensors, or from the web using different APIs (e.g., <a href="http://home.openweathermap.org/users/sign_in">weather</a>, <a href="https://developers.google.com/maps/documentation/elevation/intro">altitude</a>). The available fields include:
<ul>
    <li>Location related</li>
    <ul>
        <li>Location</li>
        <li>Distance to a previously defined point</li>
        <li>Heading to a previously defined point</li>
        <li>Elevation</li>
    </ul>    
    <li>Weather related</li>
    <ul>
        <li>Status</li>
        <li>Temperature</li>
        <li>Pressure</li>
        <li>Humidity</li>
        <li>Wind speed</li>
        <li>Wind direction</li>
    </ul>
    <li>Time related</li>
    <ul>
        <li>Sunrise</li>
        <li>Sunset</li>
        <li>Train schedule</li>
    </ul>
</ul>
</p>

<p>
<em>Pebble IHM</em> will communicate with the Pebble watch via Bluetooth by using pre-formatted messages. These messages are items on a dictionary with key values that need to be common to both, Smartphone and Pebble, applications. The complete documentation of the <a href="https://developer.getpebble.com/docs/c/Foundation/AppMessage/">AppMessage</a> API can be found at <a href="https://developer.getpebble.com/guides/pebble-apps/communications/">https://developer.getpebble.com/guides/pebble-apps/communications/</a>.
</p>

<h3>How to create a Pebble Watchapp</h3>
<p>
There are two possible setups for creating Pebble Watchapps:
<ul>
    <li>Using the <a href="https://cloudpebble.net/">CloudPebble</a> web interface</li>
    <li>Installing the Pebble <a href="https://developer.getpebble.com/sdk/">SDK</a> locally</li>
</ul>
You have to decide which setup to use before starting. The examples we prepared for you were done using CloudPebble, but you are free to use the setup that better suits your preferences.
</p>

<p>
Pebble Watchapps are written in C. Pebble offers a <a href="https://developer.getpebble.com/tutorials/beginner/primer/">tutorial</a> to learn the basics of the C language. Moreover, we recommend you to follow the tutorial at <a href="https://developer.getpebble.com/guides/pebble-apps/app-structure/">https://developer.getpebble.com/guides/pebble-apps/app-structure/</a> to acquire a basic understanding of how to create your own Watchapp.
</p>

<h4>CloudPebble</h4>
<p>
Pebble Watchapps can be created without installing any software locally by using the online Pebble development platform <a href="https://cloudpebble.net/">CloudPebble</a>. In order to use CloudPebble, you first have to create a user account and sing into this account.
</p>
<p>
By selecting "SOURCE FILES", CloudPebble allows you to create and edit your source files:
</p>
<img src="CloudPebble_edit.png" height="609" width="650">

<p>
By selecting "COMPILATION", CloudPebble allows you to compile, debug and simulate your code:
</p>
<img src="CloudPebble_deploy.png" height="609" width="650">

<p>
If you configure CloudPebble to use your Smartphone instead of the emulator (i.e., selecting PHONE instead of EMULATOR) you can deploy your source code directly to your phone while editing the sources by pressing the ply button (the green button with the triangle pointing to the right).
</p>
<p>
Once the Watchapp is ready, you can deploy it into your watch by sinchronizing your project in CloudPebble with your smartphone using the button "INSTALL AND RUN".
</p>

<h4>The Pebble IHM Watchapp</h4>
<p>
We provide you with a base Watchapp also called <em>Pebble IHM</em> that you can use as starting point for building your own interface. You can download the file <a href="ihm_2015.zip">ihm_2015.zip</a> and import the project into your CloudPebble account (<em>PROJECTS -> IMPORT -> UPLOAD ZIP -> IMPORT</em>).
</p>

<h3>Running the Example Code</h3>
<p>
This section describes the steps needed to make the example code to work.
</p>

<h4>Smartphone</h4>
<p>
Launch <em>Pebble IHM</em> on the Smartphone. The app will ask you to enter the UUID of the Pebble Watchapp to which it is going to communicate. The UUID of the example Watchapp can be obtained from the project settings on CloudPebble under the field "APP UUID". Once you acknowledge the UUID, you must turn on the switch <em>Enable API</em>. It will initialize the different APIs employed to obtain information from the web, and prepare the Smartphone for sending these items to the Pebble watch.
</p>
<p>
TODO: Better explain how the Smartphone app works
</p>

<h4>Pebble</h4>
<p>
Navigate through the main menu and launch <em>Pebble IHM</em> on the watch. The Watchapp will start communicating with the Smartphone app and will configure something in it, or ask for a different field each time you press the <em>UP</em> button (i.e., top button on the right side of the watch).
</p>
<table style="width:100%">
  <tr class="border_bottom">
    <td>Press number</td>
    <td>Item description</td>
  </tr>
  <tr>
    <td>1</td>
    <td>Ask for location: latitude and longitude</td>
  </tr>
  <tr>
    <td>2</td>
    <td>Set te current location as target location for navigation</td>
  </tr>
  <tr>
    <td>3</td>
    <td>Starts the thread that computes the distance and heading for navigation and ask for distance and heading to the predefined target</td>
  </tr>
  <tr>
    <td>4</td>
    <td>Stops the thread that computes the distance and heeading for navigation</td>
  </tr>
  <tr>
    <td>5</td>
    <td>Elevation</td>
  </tr>
  <tr>
    <td>6</td>
    <td>Weather status</td>
  </tr>
  <tr>
    <td>7</td>
    <td>Temperature</td>
  </tr>
  <tr>
    <td>8</td>
    <td>Pressure</td>
  </tr>
  <tr>
    <td>9</td>
    <td>Humidity</td>
  </tr>
  <tr>
    <td>10</td>
    <td>Wind speed and wind direction</td>
  </tr>
  <tr>
    <td>11</td>
    <td>Sunrise time</td>
  </tr>
  <tr>
    <td>12</td>
    <td>Sunset time</td>
  </tr>
  <tr>
    <td>13</td>
    <td>Time of the next train to a predefined city</td>
  </tr>
</table>


<hr>
<div align="left">November 2015</div>
</body>

</html>

